// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "sqlite"
}

model Event {
  id         Int          @id @default(autoincrement())
  name       String
  startDate  String
  endDate    String
  blogLink   String
  images     Image[]
  public     Boolean      @default(false)
  eventDecor EventDecor[] @relation("Event")
}

model Image {
  id       Int    @id @default(autoincrement())
  imageUrl String
  event    Event  @relation(fields: [eventId], references: [id])
  eventId  Int
}

model Decor {
  id         Int          @id @default(autoincrement())
  name       String
  type       String
  eventDecor EventDecor[] @relation("Decor")
}

model EventDecor {
  id       Int    @id @default(autoincrement())
  event    Event  @relation(name: "Event", fields: [eventId], references: [id])
  eventId  Int
  decor    Decor  @relation(name: "Decor", fields: [decorId], references: [id])
  decorId  Int
  overview String
  status   String
}

model Forecast {
  id                 Int      @id @default(autoincrement())
  date               String
  bigFlowers         Flower[] @relation(name: "BigFlowers")
  flowerOfTheMonth   Flower   @relation(name: "FOTM", fields: [flowerOfTheMonthId], references: [id])
  flowerOfTheMonthId Int
  blogLink           String
  name               String
  public             Boolean  @default(false)
}

model Flower {
  id                        Int        @id @default(autoincrement())
  name                      String
  slug                      String     @unique
  flowerOfTheMonthForecasts Forecast[] @relation("FOTM")
  bigFlowerForecasts        Forecast[] @relation("BigFlowers")
}

model User {
  id                  Int    @id @default(autoincrement())
  username            String @unique
  password            String
  password_salt       String
  password_iterations Int
}
